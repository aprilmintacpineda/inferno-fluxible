"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mapStatesToProps=mapStatesToProps,exports.dispatch=dispatch,exports.connect=connect;var _inferno=require("inferno"),_fluxibleJs=require("fluxible-js"),_redefineStaticsJs=_interopRequireDefault(require("redefine-statics-js"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _objectSpread(a){for(var b=1;b<arguments.length;b++){var c=null==arguments[b]?{}:arguments[b],d=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(d=d.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),d.forEach(function(b){_defineProperty(a,b,c[b])})}return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function mapStatesToProps(a,b){function c(){var c=this,d=b((0,_fluxibleJs.getStore)());this.state={count:0},this.componentWillUnmount=(0,_fluxibleJs.addObserver)(function(){d=b((0,_fluxibleJs.getStore)()),c.setState({count:c.state.count+1})},Object.keys(d)),this.render=function(){return(0,_inferno.normalizeProps)((0,_inferno.createComponentVNode)(2,a,_objectSpread({},c.props,d)))}}return c.prototype=_inferno.Component.prototype,c.prototype.constructor=c,c}function dispatch(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return a.apply(void 0,[{getStore:_fluxibleJs.getStore,updateStore:function c(a,b){(0,_fluxibleJs.updateStore)(a),b&&b()}}].concat(c))}function connect(a,b){return function(c){function d(d){var f=this;return this.props=d,a&&(this.mappedStates=a((0,_fluxibleJs.getStore)()),this.removeListener=(0,_fluxibleJs.addObserver)(function(){f.mappedStates=a((0,_fluxibleJs.getStore)()),f.setState({count:f.state.count+1})},Object.keys(this.mappedStates)),this.state={count:0}),this.componentWillUnmount=function(){f.removeListener&&f.removeListener()},this.render=function(){return a&&b?(0,_inferno.normalizeProps)((0,_inferno.createComponentVNode)(2,c,_objectSpread({},f.props,e,f.mappedStates))):a?(0,_inferno.normalizeProps)((0,_inferno.createComponentVNode)(2,c,_objectSpread({},f.props,f.mappedStates))):(0,_inferno.normalizeProps)((0,_inferno.createComponentVNode)(2,c,_objectSpread({},f.props,e)))},this}var e={};return b&&function(){for(var c=Object.keys(b),d=function(d){e[c[d]]=function(){for(var a=arguments.length,e=Array(a),f=0;f<a;f++)e[f]=arguments[f];return dispatch.apply(void 0,[b[c[d]]].concat(e))}},f=0;f<c.length;f++)d(f)}(),d.prototype=_inferno.Component.prototype,d.prototype.constructor=d,(0,_redefineStaticsJs.default)(d,c),d}}